build: false
shallow_clone: true
environment:

  global:
    sdkver: "C:/Program Files/Microsoft SDKs/Windows/v7.0/Setup/WindowsSdkVer.exe"
    python: "C:/Python27-x64"
    pythonpath: "C:/vtk/bin/Lib/site-packages"
    ets_toolkit: "qt4"

  matrix:
    - vtk_url: "http://www.vtk.org/files/release/6.3/vtkpython-6.3.0-Windows-64bit.exe"

    - vtk_url: "http://www.vtk.org/files/release/7.1/vtkpython-7.1.1-Windows-64bit.exe"

cache:
  - C:\Users\appveyor\.cache -> appveyor-reset-cache.txt

init:
  - ps: $Env:path = $Env:python + ";" + $Env:python + "\scripts;" + "C:\vtk\bin;" + $Env:path
install:
  - ps: (new-object net.webclient).DownloadFile($Env:vtk_url, 'c:/vtkpython.exe')
  - ps: c:/vtkpython.exe /S /D=C:\vtk
  - ps: python -m pip install --upgrade pip wheel
  - ps: pip --version
  - pip install -r appveyor-requirements.txt
  - pip install -e .
test_script:
  - coverage erase
  - coverage run -p -m nose.core -v tvtk/tests
  - coverage run -p -m nose.core -v mayavi
  - coverage combine
  - coverage report
