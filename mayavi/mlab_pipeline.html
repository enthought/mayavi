

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Assembling pipelines with mlab &mdash; mayavi 4.3.1 documentation</title>
    
    <link rel="stylesheet" href="_static/default.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '',
        VERSION:     '4.3.1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="top" title="mayavi 4.3.1 documentation" href="index.html" />
<style type="text/css">
  body {
    /* Very bottom copyright, etc. info */
    background: #4d598d;
  }

  .documentwrapper {
    /* Blank area on left bar */
    background: #24326e;
  }

  .related {
    /* Long horizontal nav bars */
    background: #3c4b8a!important;
  }

  .sphinxsidebarwrapper {
    /* Filled part of left sidebar */
    background: #24326e;
  }

  a {
    color: #253370;
  }

  .sphinxsidebarwrapper a {
    color: #f2f2f2!important;
  }
</style>

  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li><a href="index.html">mayavi 4.3.1 documentation</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="assembling-pipelines-with-mlab">
<span id="controlling-the-pipeline-with-mlab-scripts"></span><h1>Assembling pipelines with <cite>mlab</cite><a class="headerlink" href="#assembling-pipelines-with-mlab" title="Permalink to this headline">¶</a></h1>
<p>The plotting functions reviewed above explore only a small fraction of
the visualization possibilities of Mayavi. The full power of Mayavi can
only be unleashed through the control of the pipeline itself. As
described in the <a class="reference internal" href="overview.html#an-overview-of-mayavi"><em>An overview of Mayavi</em></a> section, a visualization in
Mayavi is created by loading the data in Mayavi with <cite>data source</cite>
object, optionally transforming the data through <a class="reference internal" href="filters.html#filters"><em>Filters</em></a>, and
visualizing it with <a class="reference internal" href="modules.html#modules"><em>Modules</em></a>. The mlab functions build complex
pipelines for you in one function, making the right choice of sources,
filters, and modules, but they cannot explore all the possible
combinations.</p>
<p>Mlab provides a sub-module <cite>pipeline</cite> which contains functions to populate
the pipeline easily from scripts. This module is accessible in <cite>mlab</cite>:
<cite>mlab.pipeline</cite>, or can be imported from
<cite>mayavi.tools.pipeline</cite>.</p>
<p>When using an <cite>mlab</cite> plotting function, a pipeline is created: first a
source is created from <cite>numpy</cite> arrays, then modules, and possibly
filters, are added. The resulting pipeline can be seen for instance with
the <cite>mlab.show_pipeline</cite> command. This information can be used to create
the very same pipeline directly using the <cite>pipeline</cite> scripting module, as
the names of the functions required to create each step of the pipeline
are directly linked to the default names of the objects created by <cite>mlab</cite>
on the pipeline. As an example, let us create a visualization using
<tt class="xref py py-func docutils literal"><span class="pre">surf()</span></tt>:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">numpy</span> <span class="kn">as</span> <span class="nn">np</span>
<span class="n">a</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">random</span><span class="p">((</span><span class="mi">4</span><span class="p">,</span> <span class="mi">4</span><span class="p">))</span>
<span class="kn">from</span> <span class="nn">mayavi</span> <span class="kn">import</span> <span class="n">mlab</span>
<span class="n">mlab</span><span class="o">.</span><span class="n">surf</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
<span class="n">mlab</span><span class="o">.</span><span class="n">show_pipeline</span><span class="p">()</span>
</pre></div>
</div>
<p>The following pipeline is created:</p>
<div class="highlight-python"><pre>Array2DSource
    \__ WarpScalar
            \__ PolyDataNormals
                    \__ Colors and legends
                            \__ Surface</pre>
</div>
<p>The same pipeline can be created using the following code:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">src</span> <span class="o">=</span> <span class="n">mlab</span><span class="o">.</span><span class="n">pipeline</span><span class="o">.</span><span class="n">array2d_source</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
<span class="n">warp</span> <span class="o">=</span> <span class="n">mlab</span><span class="o">.</span><span class="n">pipeline</span><span class="o">.</span><span class="n">warp_scalar</span><span class="p">(</span><span class="n">src</span><span class="p">)</span>
<span class="n">normals</span> <span class="o">=</span> <span class="n">mlab</span><span class="o">.</span><span class="n">pipeline</span><span class="o">.</span><span class="n">poly_data_normals</span><span class="p">(</span><span class="n">warp</span><span class="p">)</span>
<span class="n">surf</span> <span class="o">=</span> <span class="n">mlab</span><span class="o">.</span><span class="n">pipeline</span><span class="o">.</span><span class="n">surface</span><span class="p">(</span><span class="n">normals</span><span class="p">)</span>
</pre></div>
</div>
<div class="section" id="data-sources">
<span id="mlab-data-source"></span><h2>Data sources<a class="headerlink" href="#data-sources" title="Permalink to this headline">¶</a></h2>
<p>The <cite>mlab.pipeline</cite> module contains functions for creating various data
sources from arrays. They are fully documented in details in the
<a class="reference internal" href="mlab_pipeline_reference.html#mlab-pipeline-reference"><em>Mlab pipeline-control reference</em></a>. We give a small summary of the
possibilities here.</p>
<p>Mayavi distinguishes sources with <strong>scalar data</strong>, and sources with
<strong>vector data</strong>, but more important, it has different functions to create
sets of <strong>unconnected points</strong>, with data attached to them, or
<strong>connected data points</strong> describing continuously varying quantities that
can be interpolated between data points, often called <cite>fields</cite> in physics
or engineering.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name" colspan="2">Unconnected sources:</th></tr>
<tr class="field-odd field"><td>&nbsp;</td><td class="field-body"><table class="hlist"><tr><td><ul>
<li><p class="first"><a class="reference internal" href="auto/mlab_pipeline_sources.html#mayavi.tools.pipeline.scalar_scatter" title="mayavi.tools.pipeline.scalar_scatter"><tt class="xref py py-func docutils literal"><span class="pre">scalar_scatter()</span></tt></a> (creates a <a class="reference internal" href="data.html#poly-data"><em>PolyData</em></a>)</p>
<a class="reference internal image-reference" href="_images/enthought_mayavi_mlab_points3d1.jpg"><img alt="_images/enthought_mayavi_mlab_points3d1.jpg" src="_images/enthought_mayavi_mlab_points3d1.jpg" style="width: 121.98px; height: 122.36px;" /></a>
</li>
</ul>
</td><td><ul>
<li><p class="first"><a class="reference internal" href="auto/mlab_pipeline_sources.html#mayavi.tools.pipeline.vector_scatter" title="mayavi.tools.pipeline.vector_scatter"><tt class="xref py py-func docutils literal"><span class="pre">vector_scatter()</span></tt></a> (creates an <a class="reference internal" href="data.html#poly-data"><em>PolyData</em></a>)</p>
<a class="reference internal image-reference" href="_images/enthought_mayavi_mlab_quiver3d1.jpg"><img alt="_images/enthought_mayavi_mlab_quiver3d1.jpg" src="_images/enthought_mayavi_mlab_quiver3d1.jpg" style="width: 135.2px; height: 141.6px;" /></a>
</li>
</ul>
</td></tr></table>
</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">implicitly-connected sources:</th></tr>
<tr class="field-even field"><td>&nbsp;</td><td class="field-body"><table class="hlist"><tr><td><ul>
<li><p class="first"><a class="reference internal" href="auto/mlab_pipeline_sources.html#mayavi.tools.pipeline.scalar_field" title="mayavi.tools.pipeline.scalar_field"><tt class="xref py py-func docutils literal"><span class="pre">scalar_field()</span></tt></a> (creates an <a class="reference internal" href="data.html#image-data"><em>ImageData</em></a>)</p>
<a class="reference internal image-reference" href="_images/enthought_mayavi_mlab_contour3d1.jpg"><img alt="_images/enthought_mayavi_mlab_contour3d1.jpg" src="_images/enthought_mayavi_mlab_contour3d1.jpg" style="width: 140.22px; height: 128.44px;" /></a>
</li>
<li><p class="first"><a class="reference internal" href="auto/mlab_pipeline_sources.html#mayavi.tools.pipeline.vector_field" title="mayavi.tools.pipeline.vector_field"><tt class="xref py py-func docutils literal"><span class="pre">vector_field()</span></tt></a> (creates an <a class="reference internal" href="data.html#image-data"><em>ImageData</em></a>)</p>
<a class="reference internal image-reference" href="_images/enthought_mayavi_mlab_flow1.jpg"><img alt="_images/enthought_mayavi_mlab_flow1.jpg" src="_images/enthought_mayavi_mlab_flow1.jpg" style="width: 169.0px; height: 105.0px;" /></a>
</li>
</ul>
</td><td><ul>
<li><p class="first"><a class="reference internal" href="auto/mlab_pipeline_sources.html#mayavi.tools.pipeline.array2d_source" title="mayavi.tools.pipeline.array2d_source"><tt class="xref py py-func docutils literal"><span class="pre">array2d_source()</span></tt></a> (creates an <a class="reference internal" href="data.html#image-data"><em>ImageData</em></a>)</p>
<a class="reference internal image-reference" href="_images/enthought_mayavi_mlab_imshow1.jpg"><img alt="_images/enthought_mayavi_mlab_imshow1.jpg" src="_images/enthought_mayavi_mlab_imshow1.jpg" style="width: 180.0px; height: 116.1px;" /></a>
</li>
</ul>
</td></tr></table>
</td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2">Explicitly-connected sources:</th></tr>
<tr class="field-odd field"><td>&nbsp;</td><td class="field-body"><table class="hlist"><tr><td><ul>
<li><p class="first"><a class="reference internal" href="auto/mlab_pipeline_sources.html#mayavi.tools.pipeline.line_source" title="mayavi.tools.pipeline.line_source"><tt class="xref py py-func docutils literal"><span class="pre">line_source()</span></tt></a> (creates an <a class="reference internal" href="data.html#poly-data"><em>PolyData</em></a>)</p>
<a class="reference internal image-reference" href="_images/enthought_mayavi_mlab_plot3d1.jpg"><img alt="_images/enthought_mayavi_mlab_plot3d1.jpg" src="_images/enthought_mayavi_mlab_plot3d1.jpg" style="width: 153.0px; height: 113.0px;" /></a>
</li>
</ul>
</td><td><ul>
<li><p class="first"><a class="reference internal" href="auto/mlab_pipeline_sources.html#mayavi.tools.pipeline.triangular_mesh_source" title="mayavi.tools.pipeline.triangular_mesh_source"><tt class="xref py py-func docutils literal"><span class="pre">triangular_mesh_source()</span></tt></a> (creates an <a class="reference internal" href="data.html#poly-data"><em>PolyData</em></a>)</p>
<a class="reference internal image-reference" href="_images/poly_data.jpg"><img alt="_images/poly_data.jpg" src="_images/poly_data.jpg" style="width: 152.0px; height: 121.6px;" /></a>
</li>
</ul>
</td></tr></table>
</td>
</tr>
</tbody>
</table>
<p>All the <cite>mlab.pipline</cite> source factories are functions that take numpy
arrays and return the Mayavi source object that was added to the
pipeline. However, the implicitly-connected sources require well-shaped
arrays as arguments: the data is supposed to lie on a regular,
orthogonal, grid of the same shape as the shape of the input array, in
other words, the array describes an image, possibly 3 dimensional.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">More complicated data structures can be created, such as irregular
grids or non-orthogonal grid. See
<a class="reference internal" href="data.html#data-structures-used-by-mayavi"><em>the section on data structures</em></a>.</p>
</div>
</div>
<div class="section" id="modules-and-filters">
<h2>Modules and filters<a class="headerlink" href="#modules-and-filters" title="Permalink to this headline">¶</a></h2>
<p>For each Mayavi module or filter (see <a class="reference internal" href="modules.html#modules"><em>Modules</em></a> and <a class="reference internal" href="filters.html#filters"><em>Filters</em></a>),
there is a corresponding <cite>mlab.pipeline</cite> function. The name of this
function is created by replacing the alternating capitals in the module
or filter name by underscores. Thus <cite>ScalarCutPlane</cite> corresponds to
<cite>scalar_cut_plane</cite>.</p>
<p>In general, the <cite>mlab.pipeline</cite> module and filter factory functions
simply create and connect the corresponding object. However they can also
contain addition logic, exposed as keyword arguments. For instance they
allow to set up easily a colormap, or to specify the color of the module,
when relevant. In accordance with the goal of the <cite>mlab</cite> interface to
make frequent operations simple, they use the keyword arguments to choose
the properties of the created object to suit the requirements. It can
be thus easier to use the keyword arguments, when available, than to set
the attributes of the objects created. For more information, please check
out the docstrings. Full, detailed, usage examples are given in the next
subsection.</p>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="index.html">
              <img class="logo" src="_static/mayavi-logo.png" alt="Logo"/>
            </a></p>
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Assembling pipelines with <cite>mlab</cite></a><ul>
<li><a class="reference internal" href="#data-sources">Data sources</a></li>
<li><a class="reference internal" href="#modules-and-filters">Modules and filters</a></li>
</ul>
</li>
</ul>

  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="_sources/mlab_pipeline.txt"
           rel="nofollow">Show Source</a></li>
  </ul>

<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
    <div id="searchbox">
	<h3>Google Search</h3>
    <form method="get" action="http://www.google.com/search">

    <table border="0" cellpadding="0">
    <tr><td>
    <input type="text"   name="q" size="20"
    maxlength="255" value="" />
    <input type="submit" value="Go" /></td></tr>
    <tr><td align="center" style="font-size:75%; color: #FFFFFF;">
    <input type="checkbox"  name="sitesearch"
    value="http://github.enthought.com/mayavi/mayavi/" checked /> only search Mayavi documentation<br />
    </td></tr></table>

    </form>
    </div>
    <hr/>
    <div id="searchbox">
	<a href="http://github.enthought.com/mayavi/mayavi/misc.html#citing-mayavi"><h3>Citing Mayavi</h3></a>

	<p style="font-size:85%; color: #FFFFFF;">
    	If you publish articles using Mayavi, please 
	<strong><a href="misc.html#citing-mayavi">cite
	Mayavi</a></strong>. We need
	these citations to justify time and resources on the software.
	</p>
    </div>

        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li><a href="index.html">mayavi 4.3.1 documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2008-2014, Prabhu Ramachandran, Gaël Varoquaux.
      Last updated on Jan 30, 2014.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.1.2.
    </div>
  </body>
</html>